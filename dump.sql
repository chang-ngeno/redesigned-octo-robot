SET DB_CLOSE_DELAY -1;         
;              
CREATE USER IF NOT EXISTS "IMALIPAY" SALT '17bddd5b94648ced' HASH 'd6afc3271759a17b60194b4e608ecb6d3174b6878c84d087033df52986432179' ADMIN;    
CREATE SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_CA474049_0952_4CEC_B30B_2731C39F0D26" START WITH 1 BELONGS_TO_TABLE; 
CREATE SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_615E9B13_7DBC_4A2C_9284_7C23E567B3F7" START WITH 1 BELONGS_TO_TABLE; 
CREATE SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_F0E6CB6F_0B42_4461_9F27_0189CDC0CB74" START WITH 3 BELONGS_TO_TABLE; 
CREATE SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_D10AC466_ADC7_46FE_BE8A_DECEAED1D2AA" START WITH 1 BELONGS_TO_TABLE; 
CREATE CACHED TABLE "PUBLIC"."LOAN_ISSUED"(
    "LOAN_ISSUED_ID" BIGINT DEFAULT NEXT VALUE FOR "PUBLIC"."SYSTEM_SEQUENCE_615E9B13_7DBC_4A2C_9284_7C23E567B3F7" NOT NULL NULL_TO_DEFAULT SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_615E9B13_7DBC_4A2C_9284_7C23E567B3F7",
    "AMOUNT" NUMERIC(19, 2),
    "LOAN_PRODUCT_ID" INT8 NOT NULL,
    "LOANEE__DTLS_ID" INT8 NOT NULL
);     
ALTER TABLE "PUBLIC"."LOAN_ISSUED" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("LOAN_ISSUED_ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOAN_ISSUED;              
CREATE CACHED TABLE "PUBLIC"."LOAN_PRODUCT"(
    "LOAN_PRODUCT_ID" BIGINT DEFAULT NEXT VALUE FOR "PUBLIC"."SYSTEM_SEQUENCE_F0E6CB6F_0B42_4461_9F27_0189CDC0CB74" NOT NULL NULL_TO_DEFAULT SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_F0E6CB6F_0B42_4461_9F27_0189CDC0CB74",
    "INTEREST_RATE" FLOAT8,
    "LOAN_AMOUNT" NUMERIC(19, 2),
    "LOAN_TYPE" VARCHAR(255),
    "TENURE" NUMERIC(19, 2)
); 
ALTER TABLE "PUBLIC"."LOAN_PRODUCT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("LOAN_PRODUCT_ID");     
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.LOAN_PRODUCT;             
INSERT INTO "PUBLIC"."LOAN_PRODUCT" VALUES
(1, 12.5, 25000.00, 'Product B', 30.00),
(2, 10.0, 10000.00, 'Product A', 15.00);
CREATE CACHED TABLE "PUBLIC"."LOANEE_DETAILS"(
    "LOANEE_DETAILS_ID" BIGINT DEFAULT NEXT VALUE FOR "PUBLIC"."SYSTEM_SEQUENCE_D10AC466_ADC7_46FE_BE8A_DECEAED1D2AA" NOT NULL NULL_TO_DEFAULT SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_D10AC466_ADC7_46FE_BE8A_DECEAED1D2AA",
    "MAX_CREDIT" NUMERIC(19, 2)
);     
ALTER TABLE "PUBLIC"."LOANEE_DETAILS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("LOANEE_DETAILS_ID"); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOANEE_DETAILS;           
CREATE CACHED TABLE "PUBLIC"."LOANEE_WALLET"(
    "LOANEE_WALLET_ID" BIGINT DEFAULT NEXT VALUE FOR "PUBLIC"."SYSTEM_SEQUENCE_CA474049_0952_4CEC_B30B_2731C39F0D26" NOT NULL NULL_TO_DEFAULT SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_CA474049_0952_4CEC_B30B_2731C39F0D26",
    "AMOUNT" NUMERIC(19, 2),
    "MOBILE_NUMBER" VARCHAR(255),
    "TRANSACTION_DATE" TIMESTAMP,
    "TRANSACTION_TYPE" CHAR(1),
    "LOANEE_DTLS_ID" INT8 NOT NULL
);   
ALTER TABLE "PUBLIC"."LOANEE_WALLET" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_9" PRIMARY KEY("LOANEE_WALLET_ID");   
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOANEE_WALLET;            
ALTER TABLE "PUBLIC"."LOAN_ISSUED" ADD CONSTRAINT "PUBLIC"."FK1J0ADNL649THY0MVPPJPG0Q71" FOREIGN KEY("LOANEE__DTLS_ID") REFERENCES "PUBLIC"."LOANEE_DETAILS"("LOANEE_DETAILS_ID") NOCHECK;     
ALTER TABLE "PUBLIC"."LOANEE_WALLET" ADD CONSTRAINT "PUBLIC"."FK4B2SS5V9RFJFRF5VE0XSAP40V" FOREIGN KEY("LOANEE_DTLS_ID") REFERENCES "PUBLIC"."LOANEE_DETAILS"("LOANEE_DETAILS_ID") NOCHECK;    
ALTER TABLE "PUBLIC"."LOAN_ISSUED" ADD CONSTRAINT "PUBLIC"."FK2D4R9NPDBO4J0XPHRIEQYG7YQ" FOREIGN KEY("LOAN_PRODUCT_ID") REFERENCES "PUBLIC"."LOAN_PRODUCT"("LOAN_PRODUCT_ID") NOCHECK;         
